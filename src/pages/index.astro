---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import site from '@data/site.yml';
import navigation from '@data/navigation.yml';
import { formatPrice } from '@utils/format';
import YouTubeEmbed from '@components/YouTubeEmbed.astro';
import GetStarted from '@components/GetStarted.astro';
import Quote from '@components/Quote.astro';
import MainLayout from '@layouts/MainLayout.astro';
import heroVideo from '@assets/hero.webm';
import videoCover from '@assets/video-cover.png';
import ChartIllustration from '@assets/chart.svg';
import ConficapLogo from '@assets/conficap.svg';
import LifelineLogo from '@assets/lifeline.svg';
import PatriaLogo from '@assets/patria.svg';
import SrvLogo from '@assets/srv.svg';
import VarteLogo from '@assets/varte.svg';

const posts = await getCollection('news', ({ data }) => !import.meta.env.PROD || !data.draft);

const caseExamplePosts = posts
  .filter((post) => post.data.category === 'case-example')
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<MainLayout
  title={site.title}
  description={site.description}
  headerClass="bg-black text-neutral-100 dark:bg-black dark:text-neutral-100"
>
  <section id="hero" class="relative overflow-clip bg-black">
    <div class="relative z-1 container">
      <div
        class="bg-gradient-to-r from-black from-50% to-transparent pt-20 text-center sm:pt-24 md:pt-28 lg:max-w-lg lg:pt-40 lg:pb-44 lg:text-left xl:pt-50 xl:pb-54"
      >
        <h1 class="mb-6 text-4xl font-semibold text-neutral-100 lg:text-5xl xl:text-6xl">
          Turn building performance into value
        </h1>
        <p class="mb-8 text-lg text-neutral-200">
          With Clouder owners can cut energy use and operating costs from day one. Our virtual
          cabling connects building systems and devices into one data layer, unlocking faster
          decisions, lower risk and higher returns, portfolio-wide.
        </p>
        <a
          href={navigation.contact.href}
          class="inline-flex h-11 cursor-pointer items-center justify-center gap-2 rounded bg-indigo-500 px-5 text-center text-sm font-medium text-nowrap text-white shadow-xs transition select-none hover:bg-indigo-400"
        >
          Get started today
        </a>
      </div>
    </div>
    <div
      class="relative z-0 aspect-square size-full sm:aspect-video lg:absolute lg:inset-0 lg:left-1/4 lg:container"
    >
      <video
        aria-hidden="true"
        playsinline=""
        autoplay=""
        muted=""
        loop=""
        class="size-full object-cover lg:absolute lg:inset-0"
      >
        <source src={heroVideo} type="video/webm" />
      </video>
      <div
        class="absolute inset-0 right-auto hidden w-24 bg-gradient-to-r from-black to-transparent lg:block"
      >
      </div>
      <div
        class="absolute inset-0 left-auto hidden w-24 bg-gradient-to-l from-black to-transparent lg:block"
      >
      </div>
      <div class="absolute inset-0 bottom-auto h-24 bg-gradient-to-b from-black/50 to-transparent">
      </div>
    </div>
  </section>
  <section
    class="border-t border-neutral-200 bg-gradient-to-b from-white to-transparent to-[500px] py-16 sm:py-20 md:py-24 lg:py-32 dark:border-neutral-800 dark:from-neutral-900"
  >
    <div class="container">
      <div>
        <p class="mb-6 text-center text-lg font-semibold">Our trusted partners</p>
        <ul class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5">
          <li class="flex items-center justify-center p-4">
            <ConficapLogo class="h-6 w-auto flex-shrink-0 sm:h-8.5" />
          </li>
          <li class="flex items-center justify-center p-4">
            <LifelineLogo class="h-8 w-auto flex-shrink-0 sm:h-11" />
          </li>
          <li class="flex items-center justify-center p-4">
            <PatriaLogo class="h-4 w-auto flex-shrink-0 sm:h-6" />
          </li>
          <li class="flex items-center justify-center p-4">
            <VarteLogo class="h-6 w-auto flex-shrink-0 sm:h-8.5" />
          </li>
          <li class="flex items-center justify-center p-4">
            <SrvLogo class="h-4 w-auto flex-shrink-0 sm:h-6" />
          </li>
        </ul>
      </div>
      <div class="my-12 grid grid-cols-1 gap-12 sm:my-16 md:my-20 lg:my-24 lg:grid-cols-5">
        <div class="col-span-full lg:col-span-2">
          <h2
            class="mb-5 text-3xl font-semibold text-neutral-900 lg:text-4xl xl:text-5xl dark:text-neutral-100"
          >
            The future of real estate is data
          </h2>
          <p class="mb-4">
            Clouder turns siloed building tech into one source of investment grade data. With
            real-time insights, you reduce energy and operating costs and increase asset value -
            across the portfolio.
          </p>
          <p class="mb-6">
            Deployed in weeks with no ceiling tear downs, our virtual cabling enables real time
            control and GRESB and EPBD-ready reporting.
          </p>
          <a
            href={navigation.contact.href}
            class="inline-flex h-11 cursor-pointer items-center justify-center gap-2 rounded bg-indigo-500 px-5 text-center text-sm font-medium text-nowrap text-white shadow-xs transition select-none hover:bg-indigo-600 dark:hover:bg-indigo-400"
          >
            Book a free consultation
          </a>
        </div>
        <div class="col-span-full lg:col-span-3">
          <YouTubeEmbed videoId="I667nb4kOJc" coverImg={videoCover} />
        </div>
      </div>
      <div class="grid grid-cols-1 gap-8 md:grid-cols-2 md:gap-12">
        <Quote
          quote="It’s our priority to stay at the forefront of sustainable construction. Partnering with Clouder in this project ensures we remain agile, innovative, and prepared to meet the growing demand from environmentally conscious owners and occupiers."
          citeName="Mikko Sirviö"
          citeTitle="Director of Commercial Construction"
          citeLogo={VarteLogo}
        />
        <Quote
          quote="We had two machines going on 16 hours per day and now we’re able to save energy being able to control them in real time by the usage of the space. Our energy savings are more than 50% with Clouder’s technology."
          citeName="Jani Pulkkinen"
          citeTitle="Construction Manager"
          citeLogo={ConficapLogo}
        />
      </div>
    </div>
  </section>
  <section
    class="border-t border-neutral-200 bg-gradient-to-b from-white to-transparent to-[500px] py-16 sm:py-20 md:py-24 lg:py-32 dark:border-neutral-800 dark:from-neutral-900"
  >
    <div class="container">
      <div class="overflow-clip">
        <div class="relative z-1 max-w-lg">
          <h3
            class="mb-5 text-3xl font-semibold text-neutral-900 lg:text-4xl dark:text-neutral-100"
          >
            Increased asset value
          </h3>
          <p class="mb-4">
            <strong class="font-semibold">Integrated systems enable 20–50% energy savings.</strong> A
            20% reduction in annual energy costs of {formatPrice(300000)} can increase asset value by
            {formatPrice(1000000)}.
          </p>
          <p class="mb-6">
            ESG-compliant, energy-efficient buildings get 25–35% higher market valuations compared
            to outdated “brown buildings.” Better data equals better certifications, occupancy
            rates, and long-term investment appeal.
          </p>
          <a
            href={navigation.product.href}
            class="inline-flex h-11 cursor-pointer items-center justify-center gap-2 rounded bg-indigo-500 px-5 text-center text-sm font-medium text-nowrap text-white shadow-xs transition select-none hover:bg-indigo-600 dark:hover:bg-indigo-400"
          >
            See how it works
          </a>
        </div>
        <div class="relative z-0 lg:-mt-24">
          <ChartIllustration class="h-auto w-full text-indigo-400" />
          <div
            class="absolute inset-0 right-auto w-1/2 bg-gradient-to-r from-neutral-50 to-transparent dark:from-neutral-950"
          >
          </div>
          <div
            class="absolute inset-0 left-auto w-24 bg-gradient-to-l from-neutral-50 to-transparent dark:from-neutral-950"
          >
          </div>
          <div
            class="absolute inset-0 top-auto h-2/3 bg-gradient-to-t from-neutral-50 to-transparent dark:from-neutral-950"
          >
          </div>
        </div>
      </div>
      <div class="flex flex-col gap-y-16 lg:flex-row">
        <div class="w-full border-t border-neutral-200 pt-15 lg:pr-16 dark:border-neutral-800">
          <div>
            <img src="https://placeholdit.com/600x300/dddddd/999999" />
          </div>
          <div>
            <h3
              class="my-5 text-2xl font-semibold text-neutral-900 md:text-3xl dark:text-neutral-100"
            >
              Future-proofed assets
            </h3>
            <p class="mb-1 font-semibold">Efficient operations</p>
            <p class="mb-4">
              Unified, real-time data improves decision making. Instant fault detection enables
              proactive management, reducing downtime and optimizing investments.
            </p>
            <p class="mb-1 font-semibold">Centralized access</p>
            <p class="mb-4">
              Centralized access to all systems reduces complexity and shortens resolution times
              across teams and vendors.
            </p>
            <p class="mb-1 font-semibold">AI ready</p>
            <p class="mb-4">
              Clean, unified data is the essential prerequisite for true AI implementation to move
              from heavy operations to the digital age.
            </p>
          </div>
        </div>
        <div
          class="hidden w-px flex-grow bg-gradient-to-b from-neutral-200 from-75% to-transparent select-none lg:block dark:from-neutral-800"
        >
          &nbsp;
        </div>
        <div class="w-full border-t border-neutral-200 pt-15 lg:pl-16 dark:border-neutral-800">
          <div>
            <img src="https://placeholdit.com/600x300/dddddd/999999" />
          </div>
          <div>
            <h3
              class="my-5 text-2xl font-semibold text-neutral-900 md:text-3xl dark:text-neutral-100"
            >
              Enhanced flexibility
            </h3>
            <p class="mb-1 font-semibold">Flexible upgrades</p>
            <p class="mb-4">
              Easily reconfigure, expand, or upgrade systems without opening walls or redoing
              expensive cabling.
            </p>
            <p class="mb-1 font-semibold">Rapid adaption</p>
            <p class="mb-4">
              Rapid adaptation to tenant changes, renovations, and new technologies without major
              disruption.
            </p>
            <p class="mb-1 font-semibold">Cost savings</p>
            <p class="mb-4">
              Lower construction, installation, and labor costs from day one — with compounding
              savings over the building lifecycle.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="container pb-16 sm:pb-20 md:pb-24 lg:pb-32">
    <GetStarted />
  </section>
  {
    caseExamplePosts.length > 0 && (
      <section class="container pb-16 sm:pb-20 md:pb-24 lg:pb-32">
        <div class="mb-8 text-center md:mb-12">
          <h2 class="text-2xl font-semibold text-neutral-900 md:text-3xl dark:text-neutral-100">
            Learn how our customers are using Clouder
          </h2>
          <a
            href={navigation.news.href}
            class="mt-4 inline-block text-neutral-500 underline-offset-2 transition hover:text-neutral-800 dark:hover:text-neutral-200"
          >
            More case examples &rarr;
          </a>
        </div>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 lg:gap-8">
          {caseExamplePosts.map((post) => (
            <article class="group relative overflow-clip rounded-md bg-white transition hover:shadow-xs dark:bg-neutral-900">
              <a href={`/news/${post.slug}`} class="flex h-full flex-col items-start">
                <div class="relative">
                  <Image
                    src={post.data.cover}
                    alt={post.data.title}
                    width={600}
                    layout="constrained"
                    class="aspect-video bg-current/10 object-cover text-neutral-500"
                  />
                  <div class="absolute inset-0 bg-current opacity-0 transition duration-300 group-hover:opacity-10" />
                </div>
                <h3 class="mx-6 my-5 text-xl font-semibold text-neutral-900 transition group-hover:text-current dark:text-neutral-100">
                  {post.data.title}
                </h3>
                <p class="m-6 mt-auto inline-flex h-9 cursor-pointer items-center rounded border border-current/25 px-3.5 text-xs font-medium text-current/65 transition hover:bg-current/8">
                  Read the case example
                </p>
              </a>
              <div class="pointer-events-none absolute inset-0 rounded-md border border-current/12 transition group-hover:border-current/16" />
            </article>
          ))}
        </div>
      </section>
    )
  }
</MainLayout>
