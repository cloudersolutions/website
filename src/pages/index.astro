---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import { YouTube } from '@astro-community/astro-embed-youtube';
import ChevronRightIcon from 'lucide-astro/ChevronRight';
import site from '@data/site.yml';
import navigation from '@data/navigation.yml';
import GetStarted from '@components/GetStarted.astro';
import Quote from '@components/Quote.astro';
import EnergyEfficiencyUI from '@components/EnergyEfficiencyUI.astro';
import SustainabilityUI from '@components/SustainabilityUI2.astro';
import HistoryUI from '@components/HistoryUI.astro';
import MainLayout from '@layouts/MainLayout.astro';
import heroVideoWebm from '@assets/hero.webm';
import heroVideoAv1 from '@assets/hero.av1.mp4';
import videoPoster from '@assets/video-poster.webp';
import ConficapLogo from '@assets/conficap.svg';
import LifelineLogo from '@assets/lifeline.svg';
import PatriaLogo from '@assets/patria.svg';
import SrvLogo from '@assets/srv.svg';
import VarteLogo from '@assets/varte.svg';

const posts = await getCollection('news', ({ data }) => !import.meta.env.PROD || !data.draft);

const caseExamplePosts = posts
  .filter((post) => post.data.category === 'case-example')
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<MainLayout
  title={site.title}
  ogTitle={site.ogtitle}
  description={site.description}
  headerClass="bg-black text-neutral-50 dark:bg-black dark:text-neutral-50"
>
  <section class="relative overflow-clip bg-black">
    <div class="relative z-1 container">
      <div
        class="bg-gradient-to-r from-black from-50% to-transparent pt-20 text-center sm:pt-24 md:pt-28 lg:max-w-[480px] lg:pt-40 lg:pb-48 lg:text-left xl:pt-48 xl:pb-56"
      >
        <h1 class="mb-6 text-4xl font-semibold text-neutral-50 md:text-5xl xl:text-6xl">
          Turn building data into performance and value
        </h1>
        <p class="mb-8 text-lg text-neutral-300">
          Clouder’s virtual cabling connects building systems and devices into a single, real-time
          data layer, delivering harmonized data that enables property owners to boost operational
          efficiency, improve sustainability, and increase asset value.
        </p>
        <a
          href={navigation.contact.href}
          class="inline-flex h-10 cursor-pointer items-center justify-center gap-1 rounded bg-indigo-500 px-4 text-center text-sm font-[550] text-nowrap text-white shadow-xs transition select-none hover:bg-indigo-400 active:bg-indigo-400"
        >
          Get started today
        </a>
      </div>
    </div>
    <div
      class="relative z-0 aspect-square size-full mask-t-from-75% mask-r-from-75% mask-l-from-75% sm:aspect-video lg:absolute lg:inset-0 lg:left-1/4 lg:container"
    >
      <video
        aria-hidden="true"
        playsinline
        autoplay
        muted
        loop
        class="absolute inset-0 size-full object-cover"
      >
        <source src={heroVideoAv1} type="video/mp4; codecs=av01" />
        <source src={heroVideoWebm} type="video/webm; codecs=vp9" />
      </video>
    </div>
  </section>
  <section
    class="border-t border-neutral-200 bg-gradient-to-b from-white to-transparent to-[500px] py-16 sm:py-20 md:py-24 lg:py-32 dark:border-neutral-800 dark:from-neutral-900"
  >
    <div class="container">
      <div>
        <p class="mb-6 text-center text-lg font-semibold">Our trusted partners</p>
        <ul class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5">
          <li class="flex items-center justify-center p-4">
            <ConficapLogo class="h-6 w-auto flex-shrink-0 sm:h-8.5" />
          </li>
          <li class="flex items-center justify-center p-4">
            <LifelineLogo class="h-8 w-auto flex-shrink-0 sm:h-11" />
          </li>
          <li class="flex items-center justify-center p-4">
            <PatriaLogo class="h-4 w-auto flex-shrink-0 sm:h-6" />
          </li>
          <li class="flex items-center justify-center p-4">
            <VarteLogo class="h-6 w-auto flex-shrink-0 sm:h-8.5" />
          </li>
          <li class="flex items-center justify-center p-4">
            <SrvLogo class="h-4 w-auto flex-shrink-0 sm:h-6" />
          </li>
        </ul>
      </div>
      <div class="my-12 grid grid-cols-1 gap-12 sm:my-16 md:my-20 lg:my-24 xl:grid-cols-3">
        <div class="max-w-prose">
          <h2 class="mb-5 text-3xl font-semibold text-neutral-950 md:text-4xl dark:text-neutral-50">
            The future of real estate is data
          </h2>
          <p class="mb-4">
            Clouder provides the foundational data infrastructure to turn siloed building tech into
            one source of investment grade data. With real-time data owners reduce energy and
            operating costs, lower risks and increase asset value—across the portfolio.
          </p>
          <p class="mb-6">
            Future-proof your asset, increase its value, and lead the market in sustainability.
          </p>
          <a
            href={navigation.contact.href}
            class="inline-flex h-10 cursor-pointer items-center justify-center gap-1 rounded bg-neutral-800 px-4 text-center text-sm font-[550] text-nowrap text-neutral-50 transition select-none hover:bg-neutral-950 active:bg-neutral-950 dark:bg-neutral-200 dark:text-neutral-950 dark:hover:bg-white dark:active:bg-white"
          >
            Book a free consultation
          </a>
        </div>
        <div class="xl:col-span-2">
          <YouTube
            id="I667nb4kOJc"
            params="rel=0&playsinline=1"
            poster={videoPoster.src}
            class="rounded-md"
            style="max-width:100%;"
          />
        </div>
      </div>
      <div class="grid grid-cols-1 gap-8 md:grid-cols-2 md:gap-14">
        <Quote
          quote="It’s our priority to stay at the forefront of sustainable construction. Partnering with Clouder in this project ensures we remain agile, innovative, and prepared to meet the growing demand from environmentally conscious owners and occupiers."
          citeName="Mikko Sirviö"
          citeTitle="Director of Commercial Construction"
          citeLogo={VarteLogo}
        />
        <Quote
          quote="We had two machines going on 16 hours per day and now we’re able to save so much energy being able to control them in real time by the usage of the space. I bet our energy savings are more than 50% with this."
          citeName="Jani Pulkkinen"
          citeTitle="Construction Manager"
          citeLogo={ConficapLogo}
        />
      </div>
    </div>
  </section>
  <section
    class="border-t border-neutral-200 bg-gradient-to-b from-white to-transparent to-[500px] py-16 sm:py-20 md:py-24 lg:py-32 dark:border-neutral-800 dark:from-neutral-900"
  >
    <div class="container">
      <div class="grid grid-cols-1 gap-y-8 pb-12 lg:grid-cols-2 lg:gap-x-28">
        <div>
          <h3 class="mb-5 text-3xl font-semibold text-neutral-950 md:text-4xl dark:text-neutral-50">
            Increased asset value
          </h3>
          <p class="mb-4">
            Integrated systems enable significant energy savings. A €60,000 cut in annual energy
            costs of €300,000 can increase asset value by €1,000,000 at a 6% yield.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">
            Streamlined operations
          </h4>
          <p class="mb-4">
            Unified data automates manual processes and streamlines administration, property
            management, and maintenance and repair costs.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">
            Higher valuations
          </h4>
          <p class="mb-6">
            Green buildings achieve 25–35% higher market valuations than outdated “brown buildings,”
            further boosting your investment returns.
          </p>
          <a
            href={navigation.contact.href}
            class="inline-flex h-10 cursor-pointer items-center justify-center gap-1 rounded bg-neutral-800 px-4 text-center text-sm font-[550] text-nowrap text-neutral-50 transition select-none hover:bg-neutral-950 active:bg-neutral-950 dark:bg-neutral-200 dark:text-neutral-950 dark:hover:bg-white dark:active:bg-white"
          >
            Get started today
          </a>
        </div>
        <div>
          <div
            class="relative -mt-4 -ml-4 max-w-3xl mask-r-from-75% mask-b-from-75% pt-4 pl-4 lg:-mt-8 lg:w-[50vw]"
          >
            <EnergyEfficiencyUI targetUsage={160} actualUsage={132.257} />
          </div>
        </div>
      </div>
      <div class="flex flex-col gap-y-14 lg:flex-row">
        <div class="border-t border-neutral-200 pt-14 lg:w-1/2 lg:pr-14 dark:border-neutral-800">
          <div class="-mt-4 -ml-4 h-64 mask-r-from-75% mask-b-from-25% pt-4 pl-4">
            <HistoryUI />
          </div>
          <h3 class="my-4 text-2xl font-semibold text-neutral-950 dark:text-neutral-50">
            Future-proofed assets
          </h3>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">AI ready</h4>
          <p class="mb-4">
            Clean, unified data is the essential prerequisite for AI implementation, moving your
            labor-heavy operations to the digital age.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">Rapid adaption</h4>
          <p class="mb-4">
            Virtual cabling enables tenant changes, renovations, and new technologies without major
            disruptions.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">Cost savings</h4>
          <p class="mb-6">
            Lower construction, installation, and labor costs from day one. These savings compound
            over the building’s entire lifecycle.
          </p>
          <a
            href={navigation.product.href}
            class="inline-flex h-10 cursor-pointer items-center justify-center gap-1 rounded bg-neutral-800 px-4 text-center text-sm font-[550] text-nowrap text-neutral-50 transition select-none hover:bg-neutral-950 active:bg-neutral-950 dark:bg-neutral-200 dark:text-neutral-950 dark:hover:bg-white dark:active:bg-white"
          >
            See how it works
          </a>
        </div>
        <div
          class="-mb-24 hidden w-px flex-grow bg-gradient-to-b from-neutral-200 from-50% to-transparent select-none lg:block dark:from-neutral-800"
        >
          &nbsp;
        </div>
        <div class="border-t border-neutral-200 pt-14 lg:w-1/2 lg:pl-14 dark:border-neutral-800">
          <div class="-mt-4 -ml-6 h-64 mask-b-from-75% mask-l-from-50% pt-3">
            <div class="float-right h-64 max-w-3xl min-w-xl after:clear-both">
              <SustainabilityUI />
            </div>
          </div>
          <h3 class="my-4 text-2xl font-semibold text-neutral-950 dark:text-neutral-50">
            Proven sustainability
          </h3>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">
            Lower energy consumption
          </h4>
          <p class="mb-4">
            Net-zero buildings require lower energy consumption. Integrated systems enable 20–50%
            energy savings.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">
            Data-driven decisions
          </h4>
          <p class="mb-4">
            Replace guesswork with actual data, enabling precise reporting, better decisions, and
            measurable sustainability progress.
          </p>
          <h4 class="mb-1 font-semibold text-neutral-950 dark:text-neutral-50">Enhanced value</h4>
          <p class="mb-6">
            Better data equals better certifications, occupancy rates, and long-term investment
            appeal.
          </p>
          <a
            href={navigation.news.href}
            class="inline-flex h-10 cursor-pointer items-center justify-center gap-1 rounded bg-neutral-800 px-4 text-center text-sm font-[550] text-nowrap text-neutral-50 transition select-none hover:bg-neutral-950 active:bg-neutral-950 dark:bg-neutral-200 dark:text-neutral-950 dark:hover:bg-white dark:active:bg-white"
          >
            See case examples
          </a>
        </div>
      </div>
    </div>
  </section>
  <section class="container pb-16 sm:pb-20 md:pb-24 lg:pb-32">
    <GetStarted />
  </section>
  {
    caseExamplePosts.length > 0 && (
      <section class="container pb-16 sm:pb-20 md:pb-24 lg:pb-32">
        <div class="mb-8 text-center md:mb-12">
          <h2 class="text-2xl font-semibold text-neutral-950 md:text-3xl dark:text-neutral-50">
            Learn how our customers are using Clouder
          </h2>
          <a
            href={navigation.news.href}
            class="group mt-4 inline-flex items-center gap-0.5 text-neutral-500 transition hover:text-current active:text-current"
          >
            More case examples
            <ChevronRightIcon
              class="mt-0.5 transition group-hover:translate-x-0.5 group-hover:text-current group-active:text-current"
              size={16}
            />
          </a>
        </div>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 lg:gap-8">
          {caseExamplePosts.map((post) => (
            <article class="group relative overflow-clip rounded-md bg-white transition hover:shadow-xs active:shadow-xs dark:bg-neutral-900">
              <a href={`/news/${post.slug}`} class="flex h-full flex-col items-start">
                <Image
                  src={post.data.cover}
                  alt={post.data.coverAlt}
                  width={600}
                  layout="constrained"
                  class="aspect-video bg-neutral-500/10 object-cover text-transparent transition group-hover:brightness-90 group-hover:saturate-90 group-active:brightness-90 group-active:saturate-90 dark:group-hover:brightness-110 dark:group-active:brightness-110"
                />
                <h3 class="mx-6 my-5 text-xl font-semibold text-neutral-950 dark:text-neutral-50">
                  {post.data.title}
                </h3>
                <p class="m-6 mt-auto inline-flex items-center gap-0.5 text-sm text-neutral-500 transition group-hover:text-current">
                  Read the case example
                  <ChevronRightIcon
                    class="mt-px transition group-hover:translate-x-0.5"
                    size={14}
                  />
                </p>
              </a>
              <div class="pointer-events-none absolute inset-0 rounded-md border border-current/12 transition group-hover:border-current/16 group-active:border-current/16" />
            </article>
          ))}
        </div>
      </section>
    )
  }
</MainLayout>
